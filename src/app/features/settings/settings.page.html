<mat-toolbar *transloco="let t">
  <button routerLink=".." routerDirection="back" mat-icon-button>
    <mat-icon>arrow_back</mat-icon>
  </button>
  <span (click)="onSettingsToolbarClicked()">{{ t('settings.settings') }}</span>
</mat-toolbar>

<ion-content *transloco="let t">
  <ion-list lines="none">
    <ion-item>
      <ion-label>{{ t('languages') }}</ion-label>
      <ion-select
        [value]="currentLanguageKey$ | ngrxPush"
        (ionChange)="setCurrentLanguage($event)"
        slot="end"
      >
        <ion-select-option
          *ngFor="let language of langauges | keyvalue"
          [value]="language.key"
        >
          {{ language.value }}
        </ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item
      *ngIf="showHiddenOption"
      [routerLink]="['/', 'settings', 'go-pro']"
    >
      <ion-label>GoPro</ion-label>
    </ion-item>

    <ion-item
      *ngIf="showHiddenOption"
      [routerLink]="['/', 'settings', 'user-guide']"
    >
      <ion-label>User Guide Preferences</ion-label>
    </ion-item>

    <ion-item (click)="confirmDelete()">
      <ion-label color="primary">{{ 'delete' | transloco }}</ion-label>
    </ion-item>
  </ion-list>

  <ion-modal id="backup-private-key-modal" #modal>
    <ng-template>
      <ion-card>
        <ion-card-content>
          <div class="backup-modal-warning-text">
            {{ t('settings.pleasePressThePrivateKeyBelowToCopy') }}
          </div>

          <ion-item button (click)="copyPrivateKeyToClipboard()">
            <ion-label>
              {{ privateKeyTruncated$ | async }}
            </ion-label>
            <ion-icon name="copy-outline" slot="end"></ion-icon>
          </ion-item>

          <ion-button
            expand="block"
            fill="clear"
            (click)="modal.dismiss(); this.deleteAccount()"
          >
            {{ t('settings.iHaveCopiedMyPrivateKey') }}
          </ion-button>
        </ion-card-content>
      </ion-card>
    </ng-template>
  </ion-modal>
</ion-content>
